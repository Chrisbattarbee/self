types:
  definitions:
    default-package: com.chrisbattarbee.self.calories
    objects:

      FoodEntry:
        fields:
          name: string
          calories: double
          carbohydrates: double
          fat: double
          protein: double
          sodium: double
          sugar: double
          quantity: double
          unit: string

      Meal:
        fields:
          entries: list<FoodEntry>
          name: string

      MealsForDay:
        fields:
          meals: list<Meal>
          date: string

      MacroGoals:
        fields:
          date: string
          calories: double
          carbohydrates: double
          fat: double
          protein: double
          sodium: double
          sugar: double

    errors:
      Internal:
        namespace: Calories
        code: INTERNAL
      NotFound:
        namespace: Calories
        code: NOT_FOUND
        safe-args:
          date: string

services:
  CalorieService:
    name: Calorie Tracking Service
    package: com.chrisbattarbee.self.calories
    base-path: /calories
    docs: |
      API for retrieving and adding calorie information.

    endpoints:
      updateDailyCalories:
        http: PUT /calories
        args:
          updateDayRequest:
            param-type: body
            type: MealsForDay
      getDailyCalories:
        http: GET /calories/{date}
        args:
          date:
            type: string
        returns: MealsForDay
      updateDailyMacroGoals:
        http: PUT /macrogoals
        args:
          updateMacroGoalsRequest:
            param-type: body
            type: MacroGoals
      getDailyMacroGoals:
        http: GET /macrogoals/{date}
        args:
          date:
            type: string
        returns: MacroGoals