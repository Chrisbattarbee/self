types:
  definitions:
    default-package: com.chrisbattarbee.self.calories
    objects:
      Temperature:
        fields:
          degree: double
          unit: TemperatureUnit

      Ingredient:
        alias: string

      RecipeName:
        alias: string

      BakeStep:
        fields:
          temperature: Temperature
          durationInSeconds: integer

      RecipeStep:
        union:
          mix: set<Ingredient>
          chop: Ingredient
          bake: BakeStep

      Recipe:
        fields:
          name: RecipeName
          steps: list<RecipeStep>

      TemperatureUnit:
        values:
          - FAHRENHEIT
          - CELSIUS

    errors:
      RecipeNotFound:
        namespace: Recipe
        code: NOT_FOUND
        safe-args:
          name: RecipeName

services:
  CalorieService:
    name: Calories
    package: com.chrisbattarbee.self.calories
    base-path: /calories
    docs: |
      API for retrieving and adding calorie information.

    endpoints:
      add:
        http: POST /
        args:
          createRecipeRequest:
            param-type: body
            type: Recipe

      getRecipe:
        http: GET /{name}
        args:
          name: RecipeName
        returns: Recipe
        docs: |
          Retrieves a recipe for the given name.

          @param name
                 The name of the recipe

      getAllRecipes:
        http: GET /
        returns: set<Recipe>

      deleteRecipe:
        http: DELETE /{name}
        args:
          name: RecipeName
